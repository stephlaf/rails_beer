<div class="container text-center">
  <h1><%= @beer.name %></h1>
  <h2 class="brewery-name"><%= @beer.brewery.name %></h2>

  <div class="my-3">
    <% if  current_user %>
      <% if @beer.beer_tabs.empty? %>
        <%= link_to "Notez cette bière", new_beer_beer_tab_path(@beer) %>

        <%#= link_to new_beer_beer_tab_path(@beer) do  %> 
          <%#= image_tag "mug_full.svg", alt: "Full pint", width: 30 %>
        <%# end %>

      <% else %>
        <% @beer.beer_tabs.first(1).each do |beer_tab| %>
          <%#= image_tag "mug_empty.svg", alt: "Empty pint", width: 30 %> 
          <%#= link_to edit_beer_beer_tab_path(@beer, beer_tab) do %>
            <!-- <span><%#= beer_tab.rating.zero? ? '💩' : '⭐️' * beer_tab.rating %></span> -->
          <%# end %>

          <!-- Link trigger modal -->
          <%= link_to edit_beer_beer_tab_path(@beer, beer_tab),'data-toggle': "modal", 'data-target': "#beerTabModal#{@beer.id}" do %>
            <span><%= beer_tab.rating.zero? ? '💩' : '⭐️' * beer_tab.rating %></span>
          <% end %> 

          <div class="modal fade" id="beerTabModal<%= @beer.id %>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel"><%= @beer.name %></h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <div class="my-3"><%= beer_tab.rating.zero? ? '💩' : '⭐️' * beer_tab.rating %></div>
                  <p><%= beer_tab.content %></p>

                </div>
                <div class="modal-footer">
                  <%= link_to 'Modifier', edit_beer_beer_tab_path(@beer, beer_tab) %>

                  <!-- <button type="button" class="" data-dismiss="modal">Fermer</button> -->
                </div>
              </div>
            </div>
          </div>

        <% end %>
      <% end %>
    <% end %>
  </div>

  <div class="my-3">
    <% if @beer.photo.attached? %>
      <%= cl_image_tag @beer.photo.key, alt: "Label", width: '150' %>
    <% end %>

    <div class="d-flex justify-content-around">
      <p>Type: <%= @beer.category %></p>
      <span><%= @beer.alc_percent %>%</span>
    </div>

    <p class="short-desc"><%= @beer.short_desc %></p>

    <p><%= @beer.long_desc %></p>
  </div>

  <%= render 'shared/links_footer' %>
</div>
